<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.61.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Samba :: Dave Svatora</title>

    
    <link href="/css/nucleus.css?1576806663" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1576806663" rel="stylesheet">
    <link href="/css/hybrid.css?1576806663" rel="stylesheet">
    <link href="/css/featherlight.min.css?1576806663" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1576806663" rel="stylesheet">
    <link href="/css/auto-complete.css?1576806663" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1576806663" rel="stylesheet">
    <link href="/css/theme.css?1576806663" rel="stylesheet">
    <link href="/css/hugo-theme.css?1576806663" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1576806663" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1576806663"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/computers_and_stuff/samba/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://davesvatora.github.io/"><img src="/images/me2.jpg"></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1576806663"></script>
<script type="text/javascript" src="/js/auto-complete.js?1576806663"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/davesvatora.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1576806663"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/about_me/" title="About Me" class="dd-item 
        
        
        
        ">
      <a href="/about_me/">
          About Me
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/about_me/nutrition/" title="Nutrition" class="dd-item ">
        <a href="/about_me/nutrition/">
        Nutrition
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/computers_and_stuff/" title="Computers and Stuff" class="dd-item 
        parent
        
        
        ">
      <a href="/computers_and_stuff/">
          Computers and Stuff
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/computers_and_stuff/samba/" title="Samba" class="dd-item active">
        <a href="/computers_and_stuff/samba/">
        Samba
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/computers_and_stuff/pi4/" title="Pi4" class="dd-item ">
        <a href="/computers_and_stuff/pi4/">
        Pi4
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/computers_and_stuff/mini_itx/" title="Mini ITX" class="dd-item ">
        <a href="/computers_and_stuff/mini_itx/">
        Mini ITX
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/computers_and_stuff/linux_software/" title="LinuxSoftware" class="dd-item ">
        <a href="/computers_and_stuff/linux_software/">
        LinuxSoftware
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/syntax/" title="Markdown Syntax" class="dd-item 
        
        
        
        ">
      <a href="/syntax/">
          Markdown Syntax
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/syntax/markdown/" title="Markdown Cheatsheet" class="dd-item ">
        <a href="/syntax/markdown/">
        Markdown Cheatsheet
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/syntax/shortcodes/" title="Shortcodes Examples" class="dd-item ">
        <a href="/syntax/shortcodes/">
        Shortcodes Examples
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://davesvatora.github.io/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Check me out on <a href="https://github.com/DaveSvatora/documentation" target="_blank"><i class="fab fa-github"> Github</i></a></p>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/DaveSvatora/documentation/tree/master/content/computers_and_stuff/samba.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/computers_and_stuff/'>Computers and Stuff</a> > Samba
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#users-and-groups">Users and Groups</a></li>
        <li><a href="#set-up-and-configure-samba">Set up and configure Samba</a></li>
        <li><a href="#connect-from-another-device">Connect from another device</a></li>
        <li><a href="#external-drive">External Drive</a></li>
        <li><a href="#editing-fstab">Editing fstab</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/samba">samba</a>

  <a class="tag-link" href="/tags/network">network</a>

  <a class="tag-link" href="/tags/file-share">file share</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Samba
            </h1>
          

        



<p>I want to create shared folder that I can access from any device on my local network so I decided to try out <a href="">Samba</a> to get some experience. I'm mainly using this <a href="https://www.fosslinux.com/8703/how-to-setup-samba-file-sharing-server-on-ubuntu.htm">guide</a>, but my notes will be a scaled down version. Ubuntu also has a great tutorial <a href="https://tutorials.ubuntu.com/tutorial/install-and-configure-samba#0">here</a></p>
<h3 id="installation">Installation</h3>
<pre><code>sudo apt install samba
</code></pre><p>Verify Installation with: <code>whereis samba</code></p>
<hr>
<h3 id="users-and-groups">Users and Groups</h3>
<p>We want to create a samba user and group and add our user to the group.</p>

<div class="notices note" ><p>You can use the existing Ubuntu user as well. If you do not want to add a new user skip to the <strong>Create Group</strong> step. More information about users and groups can be found <a href="https://vitux.com/add-and-manage-user-accounts-in-ubuntu-18-04-lts/">here</a></p>
</div>

<h4 id="create-user">Create User</h4>
<p>adduser will create the new user and prompt for a password</p>
<pre><code>sudo adduser smbuser
</code></pre><h4 id="create-group">Create Group</h4>
<pre><code>sudo addgroup smbgroup
</code></pre><p>Add our user to the group</p>
<pre><code>sudo usermod -aG smbgroup smbuser
</code></pre><p>Set the samba password. <em>Note this will be the password used when connecting from a remote device</em></p>
<pre><code>sudo smbpasswd -a smbuser
</code></pre><hr>
<h3 id="set-up-and-configure-samba">Set up and configure Samba</h3>
<p>Next we will create the directory we want to share on our network and configure Samba to serve it.</p>
<h4 id="directory">Directory</h4>
<pre><code>sudo mkdir -p /home/smbuser/samba/share/
</code></pre><p>Set up the permissions</p>
<pre><code>sudo chown -R root:smbgroup /home/smbuser/samba/share
sudo chmod -R 0770 /home/smbuser/samba/share
</code></pre><h4 id="configure-samba">Configure Samba</h4>
<p>Last but not least we need to configure Samba to share our directory we just created. There are lots of configurations available, but in this case we are just going to simplify the file.</p>
<pre><code>sudo nano /etc/samba/samba.conf
</code></pre><p>Replace the contents with this</p>
<pre><code>[global]
workgroup = WORKGROUP
server string = Samba Server %v
netbios name = &lt;name of your machine&gt;
security = user

[share]
path = /home/smbuser/samba/share
valid users = @smbgroup
guest ok = no
writable = yes
browsable = yes
</code></pre><p>Restart Samba</p>
<pre><code>sudo service smbd restart
</code></pre><p>Check the config</p>
<pre><code>testparm
</code></pre><hr>
<h3 id="connect-from-another-device">Connect from another device</h3>
<p>At this point you should now be sharing a folder on your LAN. There are lots of ways to connect, the easiest is to use network discovery on the OS you are running. Another option is to manually type in the IP address. When prompted you will need to enter your user and password we created earlier.</p>
<hr>
<h3 id="external-drive">External Drive</h3>
<p>I had some issues getting the permissions set up right for an external hard drive. I fought with it over and over trying to get the permissions ot work right with <code>chown</code> and <code>nautilus</code>, but nothing would take. I ended up finding one answer on <a href="https://superuser.com/a/57096">superuser</a> that fixed the mount.</p>
<h4 id="step-1">Step 1</h4>
<p>Open <code>Disks</code> and take note of the mount point for me it was <code>/dev/sda1</code> mounted to <code>/media/&lt;user&gt;/&lt;ExternalDrive&gt;</code></p>
<h4 id="step-2">Step 2</h4>
<p>Unmount the drive in <code>Disks</code> selecting the external drive and pressing the stop button</p>
<h4 id="step-3">Step 3</h4>
<p>Remount the drive using the appropriate permissions</p>
<pre><code>sudo mount -o uid=root,gid=smbgroup /dev/sda1 /media/&lt;user&gt;/&lt;ExternalDrive&gt;
</code></pre>
<div class="notices note" ><p>Replace <code>&lt;user&gt;</code> with your ubuntu user and <code>&lt;ExternalDrive&gt;</code> with the name of your external drive.</p>
</div>


<div class="notices info" ><p>External hard drives can only be accessed by users with root access or mounted to the users directory. Ex: user1 cannot access an external samba share mounted to <code>/media/user2/drive</code></p>
</div>

<h3 id="editing-fstab">Editing fstab</h3>

<div class="notices warning" ><p>Danger, please know what your doing before proceeding&hellip;see this <a href="https://help.ubuntu.com/community/Fstab#Editing_fstab">guide</a></p>
</div>

<p>For me setting the permissions and ntfs-3g options auto mounted my external hard drive how I wanted.</p>
<pre><code>UUID=FAEA8385EA833D3F   /media/&lt;user&gt;/Seagate\040Expansion\040Drive     ntfs-3g auto,users,uid=root,gid=smbgroup,locale=en_US.UTF-8     0       0
</code></pre>

<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/computers_and_stuff/" title="Computers and Stuff"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/computers_and_stuff/pi4/" title="Pi4" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1576806663"></script>
    <script src="/js/perfect-scrollbar.min.js?1576806663"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1576806663"></script>
    <script src="/js/jquery.sticky.js?1576806663"></script>
    <script src="/js/featherlight.min.js?1576806663"></script>
    <script src="/js/highlight.pack.js?1576806663"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1576806663"></script>
    <script src="/js/learn.js?1576806663"></script>
    <script src="/js/hugo-learn.js?1576806663"></script>

    <link href="/mermaid/mermaid.css?1576806663" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1576806663"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

